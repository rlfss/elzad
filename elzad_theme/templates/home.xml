<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--Home page categories-->
    <template id="homepage_categories" name="Home page categories">
        <section class="s_categs_home">
            <div id="accordionCateg">
                <div class="categ">
                    <div class="container">
                        <div class="owl-quick-access owl-carousel owl-theme">
                            <t t-foreach="categories" t-as="categ">
                                <div class="item" t-attf-id="heading-#{categ.id}">
                                    <button class="btn btn-link highlight collapsed" type="button"
                                            data-toggle="collapse"
                                            t-attf-data-target="#collapse-#{categ.id}" aria-expanded="true"
                                            t-attf-aria-controls="collapse-#{categ.id}">
                                        <img t-if="categ.image" alt="" t-att-src="image_data_uri(categ.image)"/>
                                        <a t-att-href="'/shop/category/%s' % slug(categ)" t-field="categ.name"/>
                                    </button>
                                </div>
                            </t>
                        </div>
                    </div>
                </div>
                <div class="sub-categ">
                    <div class="container">
                        <div class="content-sub-categ">

                            <t t-foreach="categories" t-as="categ">
                                <div t-attf-id="collapse-#{categ.id}" class="collapse child1"
                                     t-attf-aria-labelledby="heading-#{categ.id}"
                                     data-parent="#accordionCateg">
                                    <div t-attf-id="accordionSubCateg-#{categ.id}">
                                        <div class="card-body" t-if="categ.child_id">
                                            <div class="d-flex flex-row">
                                                <t t-foreach="categ.child_id" t-as="child">
                                                    <div class="p-2">
                                                        <button class="btn btn-link collapsed" type="button"
                                                                data-toggle="collapse"
                                                                t-attf-data-target="#collapse-#{child.id}"
                                                                aria-expanded="true"
                                                                t-attf-aria-controls="collapse-#{child.id}">
                                                            <a t-att-href="'/shop/category/%s' % slug(child)"
                                                               t-field="child.name"/>
                                                        </button>
                                                    </div>
                                                </t>
                                            </div>
                                        </div>
                                        <t t-foreach="categ.child_id" t-as="child">
                                            <div t-attf-id="collapse-#{child.id}" class="collapse child2"
                                                 t-attf-aria-labelledby="heading-#{child.id}"
                                                 t-attf-data-parent="#accordionSubCateg-#{categ.id}">
                                                <div class="card-body" t-if="child.child_id">
                                                    <div class="d-flex flex-row">
                                                        <t t-foreach="child.child_id" t-as="child">
                                                            <div class="p-2">
                                                                <a t-att-href="'/shop/category/%s' % slug(child)"
                                                                   t-field="child.name"/>
                                                            </div>
                                                        </t>
                                                    </div>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                </div>
                            </t>

                        </div>
                    </div>
                </div>
            </div>
        </section>
    </template>

    <!--Home page slider-->
    <template id="slider_home" name="Home page slider">
        <section class="s_slider_home mt-20">
            <div class="container">
                <div class="owl-slider-home owl-carousel owl-theme owl-nav-1">
                    <t t-foreach="slider_home" t-as="slide">
                        <div class="item">
                            <div class="row align-items-center">
                                <div class="col-md-6">
                                    <img alt="" t-att-src="image_data_uri(slide.image)" class="img-fluid"/>
                                </div>
                                <div class="col-md-6">
                                    <h3>
                                        <p t-esc="slide.name"/>
                                    </h3>
                                    <a t-att-href="slide.link" class="btn btn-success btn-slider">Get Now</a>
                                </div>
                            </div>
                        </div>
                    </t>
                </div>
            </div>
        </section>
    </template>

    <!--Home page publicity-->
    <template id="publicity" name="Home page publicity">
        <section class="s_publicity mt-20">
            <div class="container">
                <div class="row">
                    <div class="col-6">
                        <img src="/elzad_theme/static/src/img/pub_1.png" class="img-fluid"/>
                    </div>
                    <div class="col-6">
                        <img src="/elzad_theme/static/src/img/pub_2.png" class="img-fluid"/>
                    </div>
                </div>
            </div>
        </section>
    </template>

    <!--Home page product offers-->
    <template id="product_offers" name="Home page product offers">
        <section class="s_product_offers">
            <div class="container">
                <div class="owl-product-home owl-carousel owl-theme owl-nav-1">
                    <t t-foreach="offers_products" t-as="product">
                        <div class="item">
                            <div class="product_item">
                                <div class="product_image">
                                    <a itemprop="url" t-att-href="product_href">
                                        <span t-field="product.image"
                                              t-options="{'widget': 'image', 'resize': None if product_image_big else '300x300'}"/>
                                    </a>
                                </div>
                                <form t-if="product._is_add_to_cart_possible()" action="/shop/cart/update"
                                      method="post">
                                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                    <div class="js_product js_main_product">
                                        <h6>
                                            <a itemprop="name" t-attf-href="/shop/product/#{ slug(product) }"
                                               t-att-content="product.name" t-field="product.name"/>
                                        </h6>
                                        <div itemprop="offers" itemscope="itemscope" itemtype="http://schema.org/Offer"
                                             class="product_price">
                                            <div class="d-flex">
                                                <div>
                                                    <span itemprop="price"
                                                          t-esc="'%.2f'%(product.lst_price)"/>
                                                    <span itemprop="priceCurrency"
                                                          t-esc="website.currency_id.name"/>
                                                </div>
                                                <div>
                                                    <t t-set="product_variant_id"
                                                       t-value="product._get_first_possible_variant_id()"/>
                                                    <input name="product_id" t-att-value="product_variant_id"
                                                           type="hidden"/>
                                                    <t t-if="product_variant_id">
                                                        <a role="button" id="add_to_cart" class="btn btn-primary btn-lg mt8 js_check_product a-submit" href="#">
                                                            <span class="fa fa-shopping-cart"/>
                                                        </a>
                                                    </t>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </t>
                </div>
            </div>
        </section>
    </template>

    <template id="homepage_elzad" name="Home page Elzad" inherit_id="website.homepage">
        <xpath expr="//div[@id='wrap']" position="replace">
            <div id="wrap" class="oe_structure oe_empty">
                <t t-call="elzad_theme.homepage_categories" t-if="len(categories)>0"/>
                <t t-call="elzad_theme.slider_home" t-if="len(slider_home)>0"/>
                <t t-call="elzad_theme.publicity"/>
                <t t-call="elzad_theme.product_offers" t-if="len(offers_products)>0"/>
            </div>
        </xpath>
    </template>

</odoo>